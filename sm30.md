---
title: "SM30"
tags: ["docs", "sm30"]
---

## Устройство клавиатуры<!-- вставить иллюстрацию с описанием основных элементов SM30 -->

## Раскладка
![image](/images/layouts/)<!-- вставить иллюстрацию с раскладкой для SM30 -->  

## Подключение
- Клавиатура **SM30** работает с устройствами под управлением Windows, macOS, Linux, Android, iOS
- Для взаимодействия с устройством используется единый протокол связи HID, дополнительная установка драйверов не требуется
- При подключении к устройству, убедитесь, что кабель USB-C плотно вставлен в разъем клавиатуры

## Настройка клавиатуры
Пожалуйста перейдите в [статью о программе Vial](/pages/docs/vial) 

### Настройка слоев раскладок 
<details>
  <summary>Layers</summary>
Слои позволяют изменять функциональность всей клавиатуры в зависимости от того, на каком **слое** она находится в данный момент. Лучше всего представить слои, как будто они расположенны друг над другом. Клавиши можно настроить для переключения между слоями по мере необходимости, аналогично клавише Shift в числовом ряду.
Вы можете просмотреть каждый доступный слой, щелкнув соответствующий номер в верхней части интерфейса. Layer 0 — это ваш базовый/основной слой.

Переключение между слоями может осуществляться несколькими способами. В нижнем меню выберите вкладку слоя, чтобы просмотреть все различные параметры.

- MO(*) - моментально активирует слой. Как только вы отпустите клавишу, слой деактивируется
- DF(*) - изменяет, какой слой является слоем по умолчанию. Это остается до тех пор, пока вы не отключите девайс
- TG(*) - переключает слой, активируя его, если он неактивен, и наоборот
- TT(*) - Если вы удерживаете клавишу нажатой, слой активируется, а затем деактивируется, когда вы отпускаете (как МО). Если вы несколько раз коснетесь его, слой будет включен или выключен (например, TG). Для этого нужно 5 нажатий
- OSL(*) - моментально активирует слой, пока не будет нажата следующая клавиша
- LT layer (kc) - мгновенно активирует слой, когда он удерживается, отправляет код клавиши при нажатии. Код клавиши можно определить, как и все другие кнопки, просто выберите меньшее поле внутри

### Примеры использования слоёв:

- Отдельный слой под макросы, которые помогают быстро работать с входящей почтой
- Еще один слой позволяет открывать нужные нам папки или приложения за доли секунд
- Следующий слой настроен для оперативной работы в браузере
- На отдельный слой можно разместить "куски" кода
- Также, можно настроить специальный слой для игр


Символ треугольника обозначает пропуск. Это значит, что действие такое же, как и слой под ним. Это удобно, так как клавиши из разных слоев могут быть нажаты одновременно.  

*Теперь давайте посмотрим на вкладки нижнего меню и проверим, что они делают*

- Basic и ISO/JIS - это стандартные раскладки клавиатур ANSI, ISO, JIS
- Layers - см. информацию о слоях выше
- Quantum - конкретные коды клавиш из прошивки QMK, наведите курсор на любой интересующий код клавиши и появится описание
- Backlight - управление RGB подсветкой (в случае если ваша клавиатура поставляется с ней) непосредственно с клавиатуры
- App, Media and Mouse - дополнительные клавиши для управления приложениями и воспроизведением мультимедиа, также здесь вы можете настроить клавиатуру для выполнения действий мыши
- Tap Dance - настройте различные действия в зависимости от того, как используется клавиша. Например, одна и та же клавиша может быть настроена на активацию макроса при нажатии или активацию чего-либо еще при удерживании (см. информацию ниже).
- User - здесь вы можете найти пользовательские клавиши, которые мы запрограммировали для вашего использования, как и раньше, просто наведите курсор, чтобы узнать, что делает каждая функция
- Macro - макросы можно использовать для выполнения заранее запрограммированной последовательности действий (см информацию ниже)

</details>

### Создание макросов
<details>
  <summary>Macros</summary>
Макросы позволяют отправлять несколько нажатий клавиш при нажатии только одной клавиши. Они могут делать все, что вы хотите: печатать целые предложения, повторять однотипные действия в играх или даже помогать вам программировать.

### Конфигурация Macros
Откройте вкладку Macros. Все макросы, которые можно настроить, будут отображаться в виде отдельных вкладок. Выберите макрос, который вы хотите настроить.

Следующим шагом будет добавление действий:
- Add action — вручную добавляет действие в список. Настройте его так, чтобы он делал именно то, что вы хотите. выберите один из вариантов — удерживайте, нажмите, отпустите и задержите.
- Tap Enter — многие макросы заканчиваются клавишей **Enter**, поэтому эта кнопка упрощает их добавление.
- Record macro — позволяет записывать макрос прямо с клавиатуры.


Используйте эти клавиши для добавления действий в список. Они будут выполняться по порядку при активации макроса.
Действия можно изменить с помощью стрелок слева.
Когда вы будете удовлетворены конфигурацией всех макросов, нажмите **Save**, чтобы сохранить все изменения. Если вы хотите вернуться к тому, что уже есть на устройстве, нажмите **Revert**.

### Примеры
- Открыть Панель Задач на Windows зажав Ctrl+Shift и потом нажать Esc:  
![image](/images/vial/vial02.png)  

- Запуск программы в Windows, открыв меню **Пуск**, введя имя программы и нажав Enter:   
![image](/images/vial/vial03.png)  

- Ввод адреса:  
![image](/images/vial/vial04.png)  

### Использование Macros
После настройки макроса его можно использовать. Просто нажмите на клавишу, которую вы хотите использовать для макроса в раскладке, затем выберите ее в нижнем меню на вкладке **Macro**

![image](/images/vial/vial05.png)  

Дополнительную информацию о функции Macros можно найти в официальной [QMK документации](https://docs.qmk.fm/feature_macros)  

</details>

### Настройка RGB подсветки

## Режим RuEn

## Перепрошивка/обновление встроенного ПО
### Подготовка:
- Скачайте последнюю версию прошивки [здесь](http://github.com/ergohaven/keymap_hub) 
- Сохраните Вашу раскладку в программе Vial, нажав на меню **File**, дальше **Save current layout**

### Установка
Для перепрошивки/обновления встроенного ПО (firmware) клавиатуру необходимо перевести в режим загрузчика (bootloader), сделать это можно несколькими способами (выберите один):  
**1. bootmagic:**
    - Зажмите верхнюю левую клавишу на второй строке (в раскладке по умолчанию клавиша Esc) и подключите USB кабель питания
    - Дождитесь когда контроллер перейдёт в режим загрузчика и откроется папка-хранилище

**2. Через кнопку reset:**
    - Подключите USB кабель питания и быстро нажмите кнопку **reset** на нижней части клавиатуры
    - Дождитесь когда контроллер перейдёт в режим загрузчика и откроется папка-хранилище

**3. Через кнопку boot:**
    - Зажмите кнопку **boot** на нижней части клавиатуры и подключите USB кабель питания
    - Дождитесь когда контроллер перейдёт в режим загрузчика и откроется папка-хранилище

- Скопируйте или перетащите Uf2 файл, после чего контроллер должен моментально перезагрузиться и начать работать в обычном режиме
- Импортируйте в программу Vial раскладку, нажав на меню **File**, дальше **Load saved layout**  